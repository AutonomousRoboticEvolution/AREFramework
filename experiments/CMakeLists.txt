if(ONLY_PHYSICAL)
    if(VREP_FOUND)
        add_definitions(-DVREP)
    elseif(COPPELIASIM_FOUND)
        add_definitions(-DCOPPELIASIM)
    endif()

    if(WITH_NN2)
       add_subdirectory(physical_update)
       add_subdirectory(physical_melai)
       add_subdirectory(visualization)
    endif()
    add_subdirectory(test_are_generate)
elseif(ONLY_SIMULATION)
    if(VREP_FOUND)
        add_definitions(-DVREP)
    elseif(COPPELIASIM_FOUND)
        add_definitions(-DCOPPELIASIM)
    endif()

    add_subdirectory(hyperneat)
    if(WITH_NN2)
        add_subdirectory(neuroEvolution)
        add_subdirectory(nipes)
        add_subdirectory(mnipes)
        add_subdirectory(mnipes_multitarget)
        add_subdirectory(bodyplantesting_nn2)
        add_subdirectory(mnipes_v2)
        add_subdirectory(visualization)
        add_subdirectory(robustness_test)
        add_subdirectory(nipes_multitarget)
        add_subdirectory(update_library)
    endif()
    add_subdirectory(lc_nsms)
    add_subdirectory(friction_estimation)
    add_subdirectory(bodyplantesting)
    add_subdirectory(morphneuro)
else()

    if(VREP_FOUND)
        add_definitions(-DVREP)
    elseif(COPPELIASIM_FOUND)
        add_definitions(-DCOPPELIASIM)
    endif()

    if(WITH_NN2)
        add_subdirectory(physical_update)
        add_subdirectory(neuroEvolution)
        add_subdirectory(nipes)
        add_subdirectory(mnipes)
        add_subdirectory(bodyplantesting_nn2)
        add_subdirectory(mnipes_v2)
        add_subdirectory(mnipes_multitarget)
        add_subdirectory(visualization)
        add_subdirectory(robustness_test)
        add_subdirectory(nipes_multitarget)
        add_subdirectory(physical_melai)
    endif()
    add_subdirectory(test_are_generate)
    add_subdirectory(bodyplantesting)
    add_subdirectory(morphneuro)

endif()
install(DIRECTORY common DESTINATION include FILES_MATCHING PATTERN "*.hpp" PATTERN "*.h" )
